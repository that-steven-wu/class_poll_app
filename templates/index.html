<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Classroom Poll</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    fieldset legend {
      font-size: 1.3em;
      font-weight: bold;
      margin-bottom: 0.5em;
    }
    .submission-info {
      margin: 1.5em 0;
      padding: 1em;
      border: 1px solid #ccc;
      border-radius: 0.5em;
      background-color: #f9f9f9;
    }
    .submission-info label {
      display: block;
      margin-top: 0.8em;
      font-weight: bold;
    }
    .submission-info input,
    .submission-info select {
      width: 100%;
      padding: 0.4em;
      margin-top: 0.2em;
      box-sizing: border-box;
    }
    .response-group {
      margin-bottom: 1em;
    }
    .response-group small {
      display: block;
      color: red;
      font-size: 0.9em;
      margin-top: 0.2em;
    }
    .disabled-input {
      background: #f2f2f2;
      cursor: not-allowed;
      opacity: 0.85;
    }
  </style>
</head>
<body>
  <h1>Classroom Poll</h1>

  <p style="color: #333; font-size: 1.1em;">
    <strong>Please express all numeric answers to one decimal place.</strong>
  </p>

  <ol style="color: #333; font-size: 1.1em; padding-left: 1.2em;">
    <li style="margin-bottom: 0.8em;">
      <span style="color: blue; font-weight: bold;">If you are not sure of an answer, please input <code>0</code>.</span>
    </li>
    <li style="margin-bottom: 0.8em;">
      <span style="color: red; font-weight: bold;">Please remove all dollar signs ($).</span> For example, if your answer is $40,000, you should just input <code>40000.0</code>.
    </li>
    <li style="margin-bottom: 0.8em;">
      <span style="color: red; font-weight: bold;">Please DO NOT input percentage signs (%).</span> For example, if your answer is 15%, you should just input <code>15.0</code>.
    </li>
    <li style="margin-bottom: 0.8em;">
      {% if disable_first %}
        <span style="color: red; font-weight: bold;">Please input your answers only for your group</span>.
        For example, if you are in Odd Team, enter your values under “Odd Team” <span style="color: red; font-weight: bold;">and input <code>0</code></span> under “Even Team”.
      {% else %}
        <span style="color: red; font-weight: bold;">Please input your answers only for your section</span>.
        For example, if you are in Section 1 or 2, enter your values under “Section 1 &amp; 2” <span style="color: red; font-weight: bold;">and input <code>0</code></span> under “Section 3 &amp; 4” and “Section 5 &amp; 6”.
      {% endif %}
    </li>
  </ol>

  <form action="/submit" method="post">
    {% set questions = [
      ("Q1a", "Question 1a"),
      ("Q1b", "Question 1b"),
      ("Q1c", "Question 1c"),
      ("Q2a", "Question 2a"),
      ("Q2b1", "Question 2b.i"),
      ("Q2b2", "Question 2b.ii"),
      ("Q3a1", "Question 3a.i"),
      ("Q3a2", "Question 3a.ii"),
      ("Q3b1", "Question 3b.i"),
      ("Q3b2", "Question 3b.ii")
    ] %}

    {% if disable_first %}
      {% set method_labels = ["Odd & Even", "Odd Team", "Even Team"] %}
      {# 2section：只渲染 Odd Team / Even Team（索引 1、2） #}
      {% set indices_to_render = [1, 2] %}
    {% else %}
      {% set method_labels = ["Section 1 & 2", "Section 3 & 4", "Section 5 & 6"] %}
      {% set indices_to_render = [0, 1, 2] %}
    {% endif %}

    {% for key, label in questions %}
      <fieldset>
        <legend>{{ label }}</legend>

        {% for i in indices_to_render %}
          <div class="response-group">
            <label for="{{ key }}_answer_{{ i+1 }}">{{ method_labels[i] }}:</label>
            <input
              type="number"
              name="{{ key }}_answer_{{ i+1 }}"
              id="{{ key }}_answer_{{ i+1 }}"
              step="any"
              required
              placeholder="Enter your answer"
            >
            {% if key in ['Q2b2', 'Q3b2'] %}
              <small>Please input whole numbers, for example, if your answer is 15%, please just enter 15.0.</small>
            {% endif %}
          </div>
        {% endfor %}
      </fieldset>
      <hr>
    {% endfor %}

    <fieldset>
      <legend>Question 4</legend>
      <textarea name="Q4_answer" id="Q4_answer" rows="5" style="width: 100%;" placeholder="Enter your response here" required></textarea>
    </fieldset>
    <hr>
    <fieldset>
      <legend>Question 5</legend>
      <textarea name="Q5_answer" id="Q5_answer" rows="5" style="width: 100%;" placeholder="Enter your response here" required></textarea>
    </fieldset>
    <hr>

    <p style="color: #333; font-size: 1em; font-style: italic;">
      If you are unsure about the answers in Question 4 &amp; 5, please leave it as <code>N/A</code>.
    </p>

    <h2 style="margin-top: 2em; font-size: 1.2em; font-weight: bold;">Submission Details</h2>

    <div class="submission-info">
      <label for="section">Section:</label>
      <select name="section" id="section" required>
        <option value="" disabled selected>Select your section</option>
        {% if disable_first %}
          <!-- 2section 模式下只保留这两个选项 -->
          <option>Odd Team</option>
          <option>Even Team</option>
        {% else %}
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
          <option>6</option>
        {% endif %}
      </select>

      <label for="team_number">Team Number:</label>
      <input type="number" name="team_number" id="team_number" min="1" max="15" required placeholder="Enter your team number">

      <label for="first_name">Submission Person First Name:</label>
      <input type="text" name="first_name" id="first_name" required placeholder="Enter first name">

      <label for="last_name">Submission Person Last Name:</label>
      <input type="text" name="last_name" id="last_name" required placeholder="Enter last name">
    </div>

    <button type="submit">Submit All Responses</button>
  </form>
</body>
</html>
